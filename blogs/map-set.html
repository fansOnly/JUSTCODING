<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>es6 Mapã€WeakMapå’ŒSetã€WeakSet è§£è¯»</title>
    <link rel="stylesheet" href="./style/reset.css">
</head>
<body>
    <!-- Set -->
    <h2 class="teal">ä¸€ã€å…³äºSet</h2>

    <h4>1ã€Set å¯¹è±¡å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å€¼ï¼ŒSet ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚</h4>

    <h4>2ã€Set å¯¹è±¡å†…éƒ¨é‡‡ç”¨ SameValueZero <sup><a href="#mark1">1âƒ£ï¸</a></sup> ç®—æ³•å¯¹å…ƒç´ è¿›è¡Œæ¯”è¾ƒå»é‡ã€‚</h4>

    <h4>3ã€Set å±æ€§</h4>
    <p>Set.prototypeï¼šSet æ„é€ å™¨çš„åŸå‹ã€‚</p>
    <p>Set.lengthï¼šSet å¯¹è±¡çš„é•¿åº¦ã€‚</p>
    <p>Set[@@species]ï¼šæ„é€ å‡½æ•°ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚</p>

    <h4>4ã€Set å®ä¾‹ï¼šé€šè¿‡ new Set([iterable]) åˆ›å»ºä¸€ä¸ª Set å¯¹è±¡ã€‚</h4>
    <p >å¦‚æœä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€æœ‰å…ƒç´ å°†æ— é‡å¤çš„ä¼ å…¥ Set ä¸­ï¼Œå¦‚æœä¼ å…¥ null æˆ–è€…ä¸ä¼ å‚æ•°ï¼Œæ–°çš„ Set é»˜è®¤ä¸ºç©ºã€‚</p>

    <h4>5ã€Set å®ä¾‹çš„å±æ€§</h4>
    <p>Set.prototype.constructorï¼šå®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œé»˜è®¤æŒ‡å‘ Setã€‚</p>
    <p>Set.prototype.sizeï¼šè¿”å› Set å¯¹è±¡çš„å€¼çš„ä¸ªæ•°ã€‚</p>

    <h4>6ã€Set å®ä¾‹çš„æ–¹æ³•ï¼š</h4>
    <p>å››ç§æ“ä½œæ–¹æ³•ï¼š</p>
    <p>A. Set.prototype.add(value)ï¼šå¾€ Set å¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼Œè¿”å› Set å¯¹è±¡ã€‚</p>
    <pre>
        <code>let set = new Set();</code>
        <code>set.add('1').add('a').add([2]);</code>
        <code class="console">// Set { '1', 'a', [ 2 ] }</code>
    </pre>
    <p>B. Set.prototype.delete(value)ï¼šç§»é™¤æŒ‡å®šçš„å…ƒç´ ï¼ŒSet å¯¹è±¡ä¸­èƒ½æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œè¿”å› trueï¼Œ å¦åˆ™è¿”å› falseã€‚</p>
    <pre>
        <code>let set = new Set(['1', 'a', [2]]);</code>
        <code>set.delete(1);</code>
        <code class="console">// false Set { '1', 'a', [ 2 ] }</code>
        <code>set.delete('1');</code>
        <code class="console">// true Set { 'a', [ 2 ] }</code>
    </pre>
    <p>C. Set.prototype.has(value)ï¼šåˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨äº Set å¯¹è±¡ä¸­ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p>
    <pre>
        <code>let set = new Set(['1', 'a', [2]]);</code>
        <code>set.has('a');</code>
        <code class="console">// true</code>
    </pre>
    <p>D. Set.prototype.clear()ï¼š ç§»é™¤ Set å¯¹è±¡å†…çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
    <pre>
        <code>let set = new Set(['1', 'a', [2]]);</code>
        <code>set.clear();</code>
        <code class="console">// Set { }</code>
    </pre>

    <p>å››ç§éå†æ–¹æ³•ï¼š</p>
    <p>A. Set.prototype.keys()ï¼šè¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ… Set å¯¹è±¡ä¸­æŒ‰æ’å…¥é¡ºåºæ’åˆ—çš„æ‰€æœ‰å…ƒç´ çš„å€¼ã€‚</p>
    <pre>
        <code>let set = new Set([1, 'a', [2], {x: 3}]);</code>
        <code>for (let item of set.keys()) {</code>
        <code class="func">console.log(item);</code>
        <code class="console func">// 1, 'a', [2], {x: 3}</code>
        <code>}</code>
    </pre>
    <p>B. Set.prototype.values()ï¼šåŒ keys() æ–¹æ³•ã€‚</p>
    <p>C. Set.prototype.entries(): è¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« Set å¯¹è±¡ä¸­æŒ‰æ’å…¥é¡ºåºæ’åˆ—çš„æ‰€æœ‰å…ƒç´ çš„å€¼çš„ [value, value] æ•°ç»„ã€‚</p>
    <pre>
        <code>let set = new Set([1, 'a', [2], {x: 3}]);</code>
        <code>for (let item of set.entries()) {</code>
        <code class="func">console.log(item);</code>
        <code class="console func">// [1, 1], ['a', 'a'], [[2], [2]], [{x: 3}, {x: 3}]</code>
        <code>}</code>
    </pre>
    <p>D. Set.prototype.forEach(callbackFn[, thisArg])ï¼šä¸º Set å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼æ‰§è¡Œä¸€æ¬¡ callbackFn()ï¼Œå¦‚æœæŒ‡å®šäº† thisArgï¼Œå›è°ƒä¸­çš„ this ä¼šæ˜¯è¿™ä¸ªå€¼ã€‚</p>
    <p class="green">psï¼šä¸èƒ½é€šè¿‡ forEach å¾ªç¯éå†ä¿®æ”¹ Set å¯¹è±¡ã€‚</p>
    <pre>
        <code>let set = new Set([1,2]);</code>
        <code>set.forEach(function(value, key) {</code>
        <code class="func">console.log(value + ':' + key);</code>
        <code class="console func">// 1:1, 2:2</code>
        <code>})</code>
    </pre>

    <h4>7ã€Set åº”ç”¨å®æˆ˜</h4>
    <p>A. Set è½¬æ¢æ•°ç»„</p>
    <pre>
        <code>let set = new Set([1, 2, 'a']);</code>
        <code>let arr = [...set];</code>
        <code>let arr2 = Array.from(set);</code>
        <code class="console">// [1, 2, 'a']</code>
    </pre>
    <p>B. æ•°ç»„å»é‡(unique)</p>
    <pre>
        <code>let arr = [1, 2, 3, 1, 4, 5];</code>
        <code>let unique = [...new Set(arr)];</code>
        <code class="console">// [1, 2, 3, 4, 5]</code>
    </pre>
    <p>C. å®ç°å¹¶é›†(union)ã€äº¤é›†(intersect)ã€å·®é›†(difference)</p>
    <pre>
        <code>let set1 = new Set([1, 2, 3, 4, 5]);</code>
        <code>let set2 = new Set([3, 6, 7, 8, 5]);</code>
        <code>let union = new Set([...set1, ...set2]);</code>
        <code class="console">// Set {1, 2, 3, 4, 5, 6, 7, 8}</code>
        <code>let intersect = new Set([...set1].filter(x => set2.has(x)));</code>
        <code class="console">// Set {3, 5}</code>
        <code>let difference = new Set([...set1].filter(x => !set2.has(x)));</code>
        <code class="console">// Set {1, 2, 4}</code>
    </pre>
    <p>D. å˜æ›´ Set ç»“æ„ï¼šå°† Set å˜æ›´ä¸ºæ•°ç»„ï¼Œå¯¹æ•°ç»„è¿›è¡Œæ“ä½œåå†è½¬æ¢ä¸º Set ç»“æ„</p>
    <p>ä¾‹ï¼šå°† Set ä¸­çš„å€¼+1</p>
    <pre>
        <code>let set = new Set([1, 2, 3, 4, 5]);</code>
        <code>let res = new Set([...set].map(x => ++x));</code>
        <code>let res = new Set(Array.from(set, x => ++x));</code>
        <code class="console">// Set {2, 3, 4, 5, 6}</code>
    </pre>
    <!-- WeakSet -->
    <h2 class="teal">äºŒã€WeakSet</h2>
    <h4>1ã€WeakSet å®šä¹‰</h4>
    <p>WeakSet å¯¹è±¡æ˜¯ä¸€äº›å¯¹è±¡çš„å€¼çš„é›†åˆï¼Œæ¯ä¸ªå¯¹è±¡åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p>

    <h4>2ã€WeakSet ä¸ Set çš„åŒºåˆ«ï¼š</h4>
    <p>A. WeakSet åªèƒ½å­˜æ”¾å¯¹è±¡å¼•ç”¨ï¼Œä¸èƒ½å­˜æ”¾å€¼ï¼Œå³æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ã€‚</p>
    <p>B. WeakSet ä¸­çš„å€¼éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¯¹è±¡æˆ–è€…å±æ€§å¼•ç”¨è¿™ä¸ªå€¼ï¼Œå®ƒä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æ‰ã€‚å› æ­¤ï¼ŒWeakset æ— æ³•è¢«æšä¸¾ã€‚</p>

    <h4>3ã€WeakSet å±æ€§</h4>
    <p>WeakSet.prototypeï¼š WeakSet å¯¹è±¡çš„åŸå‹</p>
    <p>WeakSet.lengthï¼š WeakSet å¯¹è±¡çš„é•¿åº¦</p>
    <p>WeakSet.prototype [ @@toStringTag ]ï¼š{ [[Writable]]: false, [[Enumerable]]: false, [[Configurable]]: true }</p>

    <h4>4ã€WeakSet å®ä¾‹ï¼šé€šè¿‡ new WeakSet([iterable]) åˆ›å»ºä¸€ä¸ª WeakSet å¯¹è±¡ã€‚</h4>
    <p >å¦‚æœä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€æœ‰å…ƒç´ å°†æ— é‡å¤çš„ä¼ å…¥ WeakSet ä¸­ï¼Œå¦‚æœä¼ å…¥ null æˆ–è€…ä¸ä¼ å‚æ•°ï¼Œæ–°çš„ WeakSet é»˜è®¤ä¸ºç©ºã€‚</p>

    <h4>5ã€WeakSet å®ä¾‹çš„å±æ€§</h4>
    <p>WeakSet.prototype.constructor</p>

    <h4>6ã€WeakSet å®ä¾‹çš„æ–¹æ³•</h4>
    <p>A. WeakSet.has(value)ï¼šåœ¨è¯¥ WeakSet å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´  valueã€‚</p>
    <pre>
        <code>let weakset = new WeakSet();</code>
        <code>weakset.add(window);</code>
        <code class="console">// WeakSet { window å¯¹è±¡ }</code>
    </pre>
    <p>B. WeakSet.delete(value)ï¼šåˆ é™¤ WeakSet å¯¹è±¡ä¸­çš„ value å€¼ã€‚</p>
    <pre>
        <code>let weakset = new WeakSet([document.body, window]);</code>
        <code>weakset.delete(document.body);</code>
        <code class="console">// WeakSet { window å¯¹è±¡ }</code>
    </pre>
    <p>C. WeakSet.has(value)ï¼šåˆ¤æ–­ value æ˜¯å¦å­˜åœ¨äº WeakSet å¯¹è±¡ä¸­ã€‚</p>
    <pre>
        <code>let weakset = new WeakSet([window]);</code>
        <code>weakset.has(window);</code>
        <code class="console">// true</code>
        <code>weakset.delete(window);</code>
        <code class="console">// false</code>
    </pre>
    <h4>7ã€WeakSet åº”ç”¨</h4>
    <p>A. å­˜å‚¨ DOM èŠ‚ç‚¹ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>







    <!-- å¤‡æ³¨åŒºåŸŸ -->
    <div class="title">æ–‡æ¡£å¤‡æ³¨ï¼š</div>
    <div class="marks">
        <div id="mark1">1âƒ£ï¸ã€SameValueZeroï¼š+0 ä¸ -0 ç›¸ç­‰ï¼›NaN ä¸ NaN ç›¸ç­‰ï¼›å…¶ä½™åŒ ===ï¼›<a href="https://www.ecma-international.org/ecma-262/6.0/#sec-samevaluezero" target="_blank">ğŸ”—</a></div>
    </div>
    <!-- å‚è€ƒé“¾æ¥ -->
    <div class="links">
        <div class="title">å‚è€ƒæ–‡çŒ®ï¼š</div>
        <p><a href="https://www.ecma-international.org/ecma-262/6.0/#sec-set-objects" target="_blank">1ã€ECMAScript 2015 (6th Edition, ECMA-262)</a></p>
        <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank">2ã€Web å¼€å‘æŠ€æœ¯JavaScriptJavaScript å‚è€ƒJavaScript æ ‡å‡†å†…ç½®å¯¹è±¡Set</a></p>
        <p><a href="http://es6.ruanyifeng.com/#docs/set-map#Set" target="_blank">3ã€é˜®ä¸€å³° ECMAScript 6å…¥é—¨ Set å’Œ Map æ•°æ®ç»“æ„</a></p>
    </div>
    <div id="top">TOP</div>
    <script src="./js/index.js"></script>
</body>
</html>