<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>ä¸€ã€å…³äºSet</title>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        
    </head>
    <body class="vscode-light">
        <!-- Set -->
<h1 id="%e4%b8%80%e5%85%b3%e4%ba%8eset">ä¸€ã€å…³äºSet</h1>
<h3 id="1set-%e7%9a%84%e5%ae%9a%e4%b9%89">1ã€Set çš„å®šä¹‰</h3>
<ul>
<li>å¯¹è±¡å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„å€¼ï¼ŒSet ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚</li>
</ul>
<h3 id="2set-%e5%af%b9%e8%b1%a1%e5%86%85%e9%83%a8%e9%87%87%e7%94%a8-samevaluezero-sup1sup-%e7%ae%97%e6%b3%95%e5%af%b9%e5%85%83%e7%b4%a0%e8%bf%9b%e8%a1%8c%e6%af%94%e8%be%83%e5%8e%bb%e9%87%8d">2ã€Set å¯¹è±¡å†…éƒ¨é‡‡ç”¨ SameValueZero <sup><a href="#a">[1]</a></sup> ç®—æ³•å¯¹å…ƒç´ è¿›è¡Œæ¯”è¾ƒå»é‡</h3>
<!-- [^1]:SameValueZeroï¼š+0 ä¸ -0 ä¸ç›¸ç­‰ï¼›NaN ä¸ NaN ç›¸ç­‰ï¼›å…¶ä½™åŒ ===; [ğŸ”—](https://www.ecma-international.org/ecma-262/6.0/#sec-samevaluezero) -->
<h3 id="3set-%e5%b1%9e%e6%80%a7">3ã€Set å±æ€§</h3>
<ul>
<li>Set.prototypeï¼šSet æ„é€ å™¨çš„åŸå‹ã€‚</li>
<li>Set.lengthï¼šSet å¯¹è±¡çš„é•¿åº¦ã€‚</li>
<li>Set[@@species]ï¼šæ„é€ å‡½æ•°ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚</li>
</ul>
<h3 id="4set-%e5%ae%9e%e4%be%8b%e9%80%9a%e8%bf%87-new-setiterable-%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa-set-%e5%af%b9%e8%b1%a1">4ã€Set å®ä¾‹ï¼šé€šè¿‡ new Set([iterable]) åˆ›å»ºä¸€ä¸ª Set å¯¹è±¡</h3>
<ul>
<li>å¦‚æœä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€æœ‰å…ƒç´ å°†æ— é‡å¤çš„ä¼ å…¥ Set ä¸­ï¼Œå¦‚æœä¼ å…¥ null æˆ–è€…ä¸ä¼ å‚æ•°ï¼Œæ–°çš„ Set é»˜è®¤ä¸ºç©ºã€‚</li>
</ul>
<h3 id="5set-%e5%ae%9e%e4%be%8b%e7%9a%84%e5%b1%9e%e6%80%a7">5ã€Set å®ä¾‹çš„å±æ€§</h3>
<ul>
<li>Set.prototype.constructorï¼šå®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œé»˜è®¤æŒ‡å‘ Setã€‚</li>
<li>Set.prototype.sizeï¼šè¿”å› Set å¯¹è±¡çš„å€¼çš„ä¸ªæ•°ã€‚</li>
</ul>
<h3 id="6set-%e5%ae%9e%e4%be%8b%e7%9a%84%e6%96%b9%e6%b3%95">6ã€Set å®ä¾‹çš„æ–¹æ³•</h3>
<blockquote>
<p>å››ç§æ“ä½œæ–¹æ³•</p>
</blockquote>
<ol>
<li>
<p>Set.prototype.add(value)ï¼šå¾€ Set å¯¹è±¡å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼Œè¿”å› Set å¯¹è±¡ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();

set1.add(<span class="hljs-number">1</span>).add(<span class="hljs-string">'a'</span>).add([<span class="hljs-number">2</span>]);

<span class="hljs-built_in">console</span>.log(set1);   <span class="hljs-comment">// Set { 1, 'a', [ 2 ] }</span>
</div></code></pre>
</li>
<li>
<p>Set.prototype.delete(value)ï¼šç§»é™¤æŒ‡å®šçš„å…ƒç´ ï¼ŒSet å¯¹è±¡ä¸­èƒ½æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œè¿”å› trueï¼Œ å¦åˆ™è¿”å› falseã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-string">'1'</span>, <span class="hljs-string">'a'</span>, [<span class="hljs-number">2</span>]]);

set1.delete(<span class="hljs-number">1</span>);  <span class="hljs-comment">// false</span>

<span class="hljs-built_in">console</span>.log(set1); <span class="hljs-comment">// Set { '1', 'a', [ 2 ] }</span>

set1.delete(<span class="hljs-string">'1'</span>);   <span class="hljs-comment">// true</span>

<span class="hljs-built_in">console</span>.log(set1);  <span class="hljs-comment">// Set { 'a', [ 2 ] }</span>
</div></code></pre>
</li>
<li>
<p>Set.prototype.has(value)ï¼šåˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨äº Set å¯¹è±¡ä¸­ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-string">'1'</span>, <span class="hljs-string">'a'</span>, [<span class="hljs-number">2</span>]]);

<span class="hljs-built_in">console</span>.log(set1.has(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// true</span>
</div></code></pre>
</li>
<li>
<p>Set.prototype.clear()ï¼š ç§»é™¤ Set å¯¹è±¡å†…çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-string">'1'</span>, <span class="hljs-string">'a'</span>, [<span class="hljs-number">2</span>]]);

set1.clear();

<span class="hljs-built_in">console</span>.log(set1);  <span class="hljs-comment">// Set {}</span>
</div></code></pre>
</li>
</ol>
<blockquote>
<p>å››ç§éå†æ–¹æ³•</p>
</blockquote>
<ol>
<li>
<p>Set.prototype.keys()ï¼šè¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ… Set å¯¹è±¡ä¸­æŒ‰æ’å…¥é¡ºåºæ’åˆ—çš„æ‰€æœ‰å…ƒç´ çš„å€¼ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>, [<span class="hljs-number">2</span>], {<span class="hljs-attr">x</span>: <span class="hljs-number">3</span>}]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> set1.keys()) {
    <span class="hljs-built_in">console</span>.log(item);  <span class="hljs-comment">// 1, 'a', [2], {x: 3}</span>
}
</div></code></pre>
</li>
<li>
<p>Set.prototype.values()ï¼šåŒ keys() æ–¹æ³•ã€‚</p>
</li>
<li>
<p>Set.prototype.entries(): è¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« Set å¯¹è±¡ä¸­æŒ‰æ’å…¥é¡ºåºæ’åˆ—çš„æ‰€æœ‰å…ƒç´ çš„å€¼çš„ [value, value] æ•°ç»„ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-string">'a'</span>, [<span class="hljs-number">2</span>], {<span class="hljs-attr">x</span>: <span class="hljs-number">3</span>}]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> set1.entries()) {
    <span class="hljs-built_in">console</span>.log(item);  <span class="hljs-comment">// [1, 1], ['a', 'a'], [[2], [2]], [{x: 3}, {x: 3}]</span>
}
</div></code></pre>
</li>
<li>
<p>Set.prototype.forEach(callbackFn[, thisArg])ï¼šä¸º Set å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼æ‰§è¡Œä¸€æ¬¡ callbackFn()ï¼Œå¦‚æœæŒ‡å®šäº† thisArgï¼Œå›è°ƒä¸­çš„ this ä¼šæ˜¯è¿™ä¸ªå€¼ã€‚</p>
</li>
</ol>
<ul>
<li>
<p>ä¸èƒ½é€šè¿‡ forEach å¾ªç¯éå†ä¿®æ”¹ Set å¯¹è±¡ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]);

set1.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>) </span>{
    <span class="hljs-built_in">console</span>.log(value + <span class="hljs-string">'-'</span> + key); <span class="hljs-comment">// 1-1, 2-2</span>
}
</div></code></pre>
</li>
</ul>
<h3 id="7set-%e5%ba%94%e7%94%a8%e5%ae%9e%e6%88%98">7ã€Set åº”ç”¨å®æˆ˜</h3>
<ol>
<li>
<p>Set è½¬æ¢æ•°ç»„</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'a'</span>]);

<span class="hljs-keyword">let</span> arr = [...set1];

<span class="hljs-keyword">let</span> arr = <span class="hljs-built_in">Array</span>.from(set1);

<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [1, 2, 'a']</span>
</div></code></pre>
</li>
<li>
<p>æ•°ç»„å»é‡(unique)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-keyword">let</span> unique = [...new <span class="hljs-built_in">Set</span>(arr)];

<span class="hljs-built_in">console</span>.log(unique); <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>
</div></code></pre>
</li>
<li>
<p>å®ç°å¹¶é›†(union)ã€äº¤é›†(intersect)ã€å·®é›†(difference)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);

<span class="hljs-keyword">let</span> set2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>]);

<span class="hljs-keyword">let</span> union = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([...set1, ...set2]);
<span class="hljs-built_in">console</span>.log(union); <span class="hljs-comment">// Set {1, 2, 3, 4, 5, 6, 7, 8}</span>

<span class="hljs-keyword">let</span> intersect = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([...set1].filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> set2.has(x)));
<span class="hljs-built_in">console</span>.log(intersect); <span class="hljs-comment">// Set {3, 5}</span>

<span class="hljs-keyword">let</span> difference = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([...set1].filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> !set2.has(x)));
<span class="hljs-built_in">console</span>.log(difference); <span class="hljs-comment">// Set {1, 2, 4}</span>
</div></code></pre>
</li>
<li>
<p>å˜æ›´ Set ç»“æ„ï¼šå°† Set å˜æ›´ä¸ºæ•°ç»„ï¼Œå¯¹æ•°ç»„è¿›è¡Œæ“ä½œåå†è½¬æ¢ä¸º Set ç»“æ„</p>
</li>
</ol>
<ul>
<li>
<p>ä¾‹ï¼šå®ç° Set ä¸­çš„å€¼+1</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> set1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);

<span class="hljs-keyword">let</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([...set1].map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> ++x));

<span class="hljs-keyword">let</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-built_in">Array</span>.from(set1, x =&gt; ++x));

<span class="hljs-built_in">console</span>.log(res); <span class="hljs-comment">// Set {2, 3, 4, 5, 6}</span>
</div></code></pre>
</li>
</ul>
<p>â€ƒ</p>
<!-- WeakSet -->
<h1 id="%e4%ba%8cweakset">äºŒã€WeakSet</h1>
<h3 id="1weakset-%e5%ae%9a%e4%b9%89">1ã€WeakSet å®šä¹‰</h3>
<ul>
<li>WeakSet å¯¹è±¡æ˜¯ä¸€äº›å¯¹è±¡çš„å€¼çš„é›†åˆï¼Œæ¯ä¸ªå¯¹è±¡åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</li>
</ul>
<h3 id="2weakset-%e4%b8%8e-set-%e7%9a%84%e5%8c%ba%e5%88%ab">2ã€WeakSet ä¸ Set çš„åŒºåˆ«</h3>
<ul>
<li>WeakSet åªèƒ½å­˜æ”¾å¯¹è±¡å¼•ç”¨ï¼Œä¸èƒ½å­˜æ”¾å€¼ï¼Œå³æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ã€‚</li>
<li>WeakSet ä¸­çš„å€¼éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å¯¹è±¡æˆ–è€…å±æ€§å¼•ç”¨è¿™ä¸ªå€¼ï¼Œå®ƒä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æ‰ã€‚å› æ­¤ï¼ŒWeakset æ— æ³•è¢«æšä¸¾ã€‚</li>
</ul>
<h3 id="3weakset-%e5%b1%9e%e6%80%a7">3ã€WeakSet å±æ€§</h3>
<ul>
<li>WeakSet.prototypeï¼š WeakSet å¯¹è±¡çš„åŸå‹</li>
<li>WeakSet.lengthï¼š WeakSet å¯¹è±¡çš„é•¿åº¦</li>
<li>WeakSet.prototype [ @@toStringTag ]ï¼š{ [[Writable]]: false, [[Enumerable]]: false, [[Configurable]]: true }</li>
</ul>
<h3 id="4weakset-%e5%ae%9e%e4%be%8b%e9%80%9a%e8%bf%87-new-weaksetiterable-%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa-weakset-%e5%af%b9%e8%b1%a1">4ã€WeakSet å®ä¾‹ï¼šé€šè¿‡ new WeakSet([iterable]) åˆ›å»ºä¸€ä¸ª WeakSet å¯¹è±¡</h3>
<ul>
<li>å¦‚æœä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€æœ‰å…ƒç´ å°†æ— é‡å¤çš„ä¼ å…¥ WeakSet ä¸­ï¼Œå¦‚æœä¼ å…¥ null æˆ–è€…ä¸ä¼ å‚æ•°ï¼Œæ–°çš„ WeakSet é»˜è®¤ä¸ºç©ºã€‚</li>
</ul>
<h3 id="5weakset-%e5%ae%9e%e4%be%8b%e7%9a%84%e5%b1%9e%e6%80%a7">5ã€WeakSet å®ä¾‹çš„å±æ€§</h3>
<ul>
<li>WeakSet.prototype.constructor</li>
</ul>
<h3 id="6weakset-%e5%ae%9e%e4%be%8b%e7%9a%84%e6%96%b9%e6%b3%95">6ã€WeakSet å®ä¾‹çš„æ–¹æ³•</h3>
<ol>
<li>
<p>WeakSet.has(value)ï¼šåœ¨è¯¥ WeakSet å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´  value</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> weakset = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakSet</span>();

weakset.add(<span class="hljs-built_in">window</span>);

<span class="hljs-built_in">console</span>.log(weakset); <span class="hljs-comment">// WeakSet { window å¯¹è±¡ }</span>
</div></code></pre>
</li>
<li>
<p>WeakSet.delete(value)ï¼šåˆ é™¤ WeakSet å¯¹è±¡ä¸­çš„ value å€¼</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> weakset = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakSet</span>([<span class="hljs-built_in">document</span>.body, <span class="hljs-built_in">window</span>]);

weakset.delete(<span class="hljs-built_in">document</span>.body);

<span class="hljs-built_in">console</span>.log(weakset); <span class="hljs-comment">// WeakSet { window å¯¹è±¡ }</span>
</div></code></pre>
</li>
<li>
<p>WeakSet.has(value)ï¼šåˆ¤æ–­ value æ˜¯å¦å­˜åœ¨äº WeakSet å¯¹è±¡ä¸­</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> weakset = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakSet</span>([<span class="hljs-built_in">window</span>]);

<span class="hljs-built_in">console</span>.log(weakset.has(<span class="hljs-built_in">window</span>)); <span class="hljs-comment">// true</span>

weakset.delete(<span class="hljs-built_in">window</span>);

<span class="hljs-built_in">console</span>.log(weakset.has(<span class="hljs-built_in">window</span>)); <span class="hljs-comment">// false</span>
</div></code></pre>
</li>
</ol>
<h3 id="7weakset-%e5%ba%94%e7%94%a8">7ã€WeakSet åº”ç”¨</h3>
<ul>
<li>å­˜å‚¨ DOM èŠ‚ç‚¹ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<p>â€ƒ</p>
<!-- Map -->
<h1 id="%e4%b8%89map">ä¸‰ã€Map</h1>
<h3 id="1map-%e7%9a%84%e5%ae%9a%e4%b9%89">1ã€Map çš„å®šä¹‰</h3>
<ul>
<li>
<p>Map å¯¹è±¡ä¿å­˜é”®å€¼å¯¹ï¼Œä»»æ„å€¼ï¼ˆå¯¹è±¡æˆ–è€…åŸå§‹å€¼ï¼‰éƒ½å¯ä»¥ä½œä¸ºé”®æˆ–è€…å€¼ã€‚</p>
</li>
<li>
<p>Map ä¸­çš„é”®å€¼æ˜¯å”¯ä¸€çš„ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

map.set(<span class="hljs-string">'x'</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'x' =&gt; 1 }</span>

map.set(<span class="hljs-string">'x'</span>, <span class="hljs-number">2</span>);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'x' =&gt; 2 }</span>
</div></code></pre>
</li>
</ul>
<h3 id="2map-%e7%9a%84%e8%af%ad%e6%b3%95">2ã€Map çš„è¯­æ³•</h3>
<ul>
<li>new Map([iterable])ï¼šiterable å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…å…¶ä»– iterable å¯¹è±¡ï¼Œå…¶å…ƒç´ ä¸ºé”®å€¼å¯¹(['a', 1], ['b', 2])ã€‚</li>
<li>null ä¼šè¢«å½“ä½œ undefined æ¥å¤„ç†ã€‚</li>
<li>Map å†…éƒ¨é”®çš„æ¯”è¾ƒåŸºäº SameValueZero <sup><a href="#a">a</a></sup>ã€‚</li>
</ul>
<h3 id="3map-%e4%b8%8e-object-%e7%9a%84%e5%af%b9%e6%af%94">3ã€Map ä¸ Object çš„å¯¹æ¯”</h3>
<ul>
<li>Object çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–è€… Symbolsï¼ŒMap çš„é”®å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚</li>
<li>Map ä¸­çš„é”®æ˜¯æœ‰åºçš„ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºéå†ã€‚</li>
<li>Map.prototype.size å¯ä»¥ç›´æ¥è·å– Map å¯¹è±¡çš„é”®å€¼å¯¹çš„ä¸ªæ•°ã€‚</li>
<li>Map å¯ä»¥ç›´æ¥è¿›è¡Œè¿­ä»£ï¼ŒObject éœ€è¦å…ˆè·å–é”®æ•°ç»„æ‰èƒ½è¿­ä»£ã€‚</li>
<li>Map åœ¨å¤„ç†é¢‘ç¹å¢åˆ é”®å€¼å¯¹çš„åœºæ™¯ä¸‹å…·æœ‰ä¸€å®šçš„æ€§èƒ½ä¼˜åŠ¿ã€‚</li>
</ul>
<h3 id="4map-%e7%9a%84%e5%b1%9e%e6%80%a7">4ã€Map çš„å±æ€§</h3>
<ul>
<li>Map.length: 0</li>
<li>Map.prototype</li>
<li>get Map[@@species]ï¼šåˆ›å»ºæ´¾ç”Ÿå¯¹è±¡</li>
</ul>
<h3 id="5map-%e5%ae%9e%e4%be%8b%e7%9a%84%e5%b1%9e%e6%80%a7">5ã€Map å®ä¾‹çš„å±æ€§</h3>
<ul>
<li>
<p>Map.prototype.constructor</p>
</li>
<li>
<p>Map.prototype.size: è¿”å› Map é”®å€¼å¯¹çš„æ•°é‡</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">2</span>]]);

<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'a' =&gt; 1, 2 =&gt; undefined }</span>

<span class="hljs-built_in">console</span>.log(map.size); <span class="hljs-comment">// 2</span>
</div></code></pre>
</li>
</ul>
<h3 id="6map-%e5%ae%9e%e4%be%8b%e7%9a%84%e6%96%b9%e6%b3%95">6ã€Map å®ä¾‹çš„æ–¹æ³•</h3>
<blockquote>
<p>5ä¸ªæ“ä½œæ–¹æ³•</p>
</blockquote>
<ol>
<li>
<p>Map.prototype.set(key, value)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map {}</span>

map.set();
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { undefined =&gt; undefined }</span>

map.set(<span class="hljs-literal">null</span>);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { undefined =&gt; undefined, null =&gt; undefined }</span>

map.set(<span class="hljs-literal">undefined</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { undefined =&gt; 1, null =&gt; undefined }</span>
</div></code></pre>
</li>
<li>
<p>Map.prototype.get(key)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

<span class="hljs-built_in">console</span>.log(map.get(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// undefined</span>
<span class="hljs-built_in">console</span>.log(map.get()); <span class="hljs-comment">// undefined</span>

map.set(<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map.get(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// 1</span>
</div></code></pre>
</li>
<li>
<p>Map.prototype.has(key)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

<span class="hljs-built_in">console</span>.log(map.has(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// false</span>
<span class="hljs-built_in">console</span>.log(map.has()); <span class="hljs-comment">// false</span>

map.set(<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map.has(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// true</span>
</div></code></pre>
</li>
<li>
<p>Map.prototype.delete(key)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

<span class="hljs-built_in">console</span>.log(map.delete(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// false</span>
<span class="hljs-built_in">console</span>.log(map.delete()); <span class="hljs-comment">// false</span>

map.set(<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map.delete(<span class="hljs-string">'a'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map {}</span>
</div></code></pre>
</li>
<li>
<p>Map.prototype.clear()</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();

map.set(<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>);
<span class="hljs-built_in">console</span>.log(map.clear()); <span class="hljs-comment">// undefined</span>
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map {}</span>
</div></code></pre>
</li>
</ol>
<blockquote>
<p>4ä¸ªéå†æ–¹æ³•</p>
</blockquote>
<ol>
<li>
<p>Map.prototype.keys()ï¼šè¿”å› Interable å¯¹è±¡ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºåŒ…å«äº†æ¯ä¸ªå…ƒç´ çš„é”®ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> map.keys()) {
    <span class="hljs-built_in">console</span>.log(key); <span class="hljs-comment">// a, b</span>
}
</div></code></pre>
</li>
<li>
<p>Map.prototype.values()ï¼šè¿”å› Iterable å¯¹è±¡ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºåŒ…å«äº†æ¯ä¸ªå…ƒç´ çš„å€¼ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> map.values()) {
    <span class="hljs-built_in">console</span>.log(value); <span class="hljs-comment">// 1, 2</span>
}
</div></code></pre>
</li>
<li>
<p>Map.prototype.entries()ï¼šè¿”å› Iterable å¯¹è±¡ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºåŒ…å«äº†æ¯ä¸ªå…ƒç´ çš„ [key, value] æ•°ç»„ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> map.entries()) {
    <span class="hljs-built_in">console</span>.log(item); <span class="hljs-comment">// ['a', 1], ['b', 2]</span>
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [key, value] <span class="hljs-keyword">of</span> map.entries()) {
    <span class="hljs-built_in">console</span>.log(key + <span class="hljs-string">' - '</span> + value); <span class="hljs-comment">// a - 1, b - 2</span>
}
</div></code></pre>
</li>
<li>
<p>Map.prototype.forEach(callbackFn[, thisArg])ï¼šæŒ‰ç…§æ’å…¥é¡ºåºä¸ºæ¯ä¸ªå…ƒç´ çš„é”®å€¼å¯¹æ‰§è¡Œä¸€æ¬¡ callbackFn å‡½æ•°ï¼Œå¦‚æœæŒ‡å®šäº† thisArgï¼Œå›è°ƒå‡½æ•°çš„ this ä¼šæ˜¯è¿™ä¸ªå€¼ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], <span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]);

map.forEach(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(key + <span class="hljs-string">' - '</span> + value); <span class="hljs-comment">// a - 1, b - 2</span>
})
</div></code></pre>
</li>
</ol>
<h3 id="7map-%e4%b8%8e%e5%85%b6%e4%bb%96%e7%b1%bb%e5%9e%8b%e7%9a%84%e8%bd%ac%e6%8d%a2">7ã€Map ä¸å…¶ä»–ç±»å‹çš„è½¬æ¢</h3>
<ol>
<li>
<p>Map è½¬æ•°ç»„</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">let</span> arr = [...map];
<span class="hljs-built_in">console</span>.log(arr); <span class="hljs-comment">// [['a', 1], ['b', 2]]</span>
</div></code></pre>
</li>
<li>
<p>æ•°ç»„è½¬Map</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> arr = [[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]];

<span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(arr);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'a' =&gt; 1, 'b' =&gt; 2 }</span>
</div></code></pre>
</li>
<li>
<p>Map è½¬å¯¹è±¡</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">const</span> mapToObj = <span class="hljs-function"><span class="hljs-params">map</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> obj = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [key, value] <span class="hljs-keyword">of</span> map) {
        obj[key] = value;
    }
    <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-keyword">let</span> obj = mapToObj(map);
<span class="hljs-built_in">console</span>.log(obj); <span class="hljs-comment">// { a: 1, b: 2 }</span>
</div></code></pre>
</li>
<li>
<p>å¯¹è±¡è½¬ Map</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> obj = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>
}

<span class="hljs-keyword">const</span> objToMap = <span class="hljs-function"><span class="hljs-params">obj</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">in</span> obj) {
        map.set(item, obj[item]);
    }
    <span class="hljs-keyword">return</span> map;
}

<span class="hljs-keyword">let</span> map = objToMap(obj);
<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'a' =&gt; 1, 'b' =&gt; 2 }</span>
</div></code></pre>
</li>
<li>
<p>Map è½¬ JSON</p>
<ul>
<li>
<p>Map è½¬æ¢ JSON å­—ç¬¦ä¸²</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'b'</span>, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">let</span> json = <span class="hljs-built_in">JSON</span>.stringify(mapToObj(map));

<span class="hljs-built_in">console</span>.log(json); <span class="hljs-comment">// '{"a": 1, "b": 2}'</span>
</div></code></pre>
</li>
<li>
<p>Map è½¬æ¢ JSON æ•°ç»„</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>], [{<span class="hljs-attr">x</span>:<span class="hljs-number">3</span>}, <span class="hljs-number">2</span>]]);

<span class="hljs-keyword">let</span> json = <span class="hljs-built_in">JSON</span>.stringify([...map]);

<span class="hljs-built_in">console</span>.log(json); <span class="hljs-comment">// '[["a", 1], [{"x":3}, 2]]'</span>
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>JSON è½¬ Map</p>
<ul>
<li>
<p>JSON å­—ç¬¦ä¸²è½¬ Map</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> json = <span class="hljs-string">'{"a": 1, "b": 2}'</span>;

<span class="hljs-keyword">let</span> map = objToMap(<span class="hljs-built_in">JSON</span>.parse(json));

<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'a' =&gt; 1, 'b' =&gt; 2 }</span>
</div></code></pre>
</li>
<li>
<p>JSON æ•°ç»„è½¬ Map</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> json = <span class="hljs-string">'[["a", 1], [{"x":3}, 2]]'</span>;

<span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(<span class="hljs-built_in">JSON</span>.parse(json));

<span class="hljs-built_in">console</span>.log(map); <span class="hljs-comment">// Map { 'a' =&gt; 1, { x: 3 } =&gt; 2 }</span>
</div></code></pre>
</li>
</ul>
</li>
</ol>
<p>â€ƒ</p>
<!-- WeakMap -->
<h1 id="4weakmap">4ã€WeakMap</h1>
<h3 id="1weakmap-%e7%9a%84%e5%ae%9a%e4%b9%89">1ã€WeakMap çš„å®šä¹‰</h3>
<ul>
<li>WeakMap æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œå®ƒçš„é”®æ˜¯å¼±å¼•ç”¨çš„ã€‚</li>
<li>WeakMap çš„é”®åªèƒ½æ˜¯å¯¹è±¡ã€‚</li>
<li>WeakMap ä¸èƒ½è¢«éå†ã€‚</li>
</ul>
<h3 id="2weakmap-%e7%9a%84%e8%af%ad%e6%b3%95">2ã€WeakMap çš„è¯­æ³•</h3>
<ul>
<li>new WeakMap([Iterable])ï¼šIterable æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆäºŒå…ƒæ•°ç»„ï¼‰æˆ–è€…å…¶ä»–å¯è¿­ä»£çš„ä¸”å…¶å…ƒç´ æ˜¯é”®å€¼å¯¹çš„å¯¹è±¡ã€‚æ¯ä¸ªé”®å€¼å¯¹ä¼šè¢«åŠ åˆ°æ–°çš„ WeakMap é‡Œã€‚null ä¼šè¢«å½“åš undefinedã€‚</li>
</ul>
<h3 id="3weakmap-%e7%9a%84%e5%b1%9e%e6%80%a7">3ã€WeakMap çš„å±æ€§</h3>
<ul>
<li>WeakMap.length: 0</li>
<li>WeakMap.prototype</li>
</ul>
<h3 id="4weakmap-%e7%9a%84%e5%ae%9e%e4%be%8b%e5%b1%9e%e6%80%a7">4ã€WeakMap çš„å®ä¾‹å±æ€§</h3>
<ul>
<li>WeakMap.prototype.constructor</li>
</ul>
<h3 id="5weakmap-%e7%9a%84%e5%ae%9e%e4%be%8b%e6%96%b9%e6%b3%95">5ã€WeakMap çš„å®ä¾‹æ–¹æ³•</h3>
<ul>
<li>
<p>WeakMap.prototype.add(key, value)</p>
</li>
<li>
<p>WeakMap.prototype.has(key)</p>
</li>
<li>
<p>WeakMap.prototype.get(key)</p>
</li>
<li>
<p>WeakMap.prototype.delete(key)</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> weakmap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>();

<span class="hljs-keyword">let</span> key = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>
}

<span class="hljs-keyword">let</span> key2 = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>
}

<span class="hljs-keyword">let</span> key3 = key;

weakmap.set(key, <span class="hljs-number">2</span>);

<span class="hljs-built_in">console</span>.log(weakmap.get(key), weakmap.get(key2), weakmap.get(key3)); <span class="hljs-comment">// 2 undefined 2</span>

<span class="hljs-built_in">console</span>.log(weakmap.has(key), weakmap.has(key2), weakmap.has(key3)); <span class="hljs-comment">// true false true</span>

<span class="hljs-built_in">console</span>.log(weakmap.delete(key), weakmap.delete(key2), weakmap.delete(key3)); <span class="hljs-comment">// true false false</span>
</div></code></pre>
</li>
</ul>
<h3 id="6weakmap-%e7%9a%84%e5%ba%94%e7%94%a8">6ã€WeakMap çš„åº”ç”¨</h3>
<ol>
<li>
<p>å­˜å‚¨ä¸€ä¸ªå¯¹è±¡çš„ç§æœ‰æ•°æ®æˆ–éšè—å®æ–½ç»†èŠ‚ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">const</span> privites = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Public</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> me = {
        <span class="hljs-comment">// some privite data here</span>
    };
    privites.set(<span class="hljs-keyword">this</span>, me);
}

Public.prototype.method = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> me = privites.get(<span class="hljs-keyword">this</span>);
    <span class="hljs-comment">// do some thing with privites data</span>
}

<span class="hljs-built_in">module</span>.exports = Public;
</div></code></pre>
</li>
<li>
<p>å­˜å‚¨ DOM èŠ‚ç‚¹ä½œä¸ºé”®å€¼ï¼Œå¯ä»¥ä¸ç”¨è€ƒè™‘å†…å­˜æ³„æ¼çš„é£é™©ã€‚</p>
<pre><code class="language-javascript"><div><span class="hljs-keyword">let</span> el = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'li'</span>);

<span class="hljs-keyword">let</span> weakmap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>();

weakmap.set(el, [clicked: <span class="hljs-number">0</span>]);

el.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> times = weakmap.get(el);
    times.clicked++;
}, <span class="hljs-literal">false</span>)
</div></code></pre>
</li>
</ol>
<p>â€ƒ</p>
<blockquote>
<p><strong>å¤‡æ³¨åŒºåŸŸ</strong></p>
<ol>
<li><span id="a">SameValueZeroï¼š+0 ä¸ -0 ç›¸ç­‰ï¼›NaN ä¸ NaN ç›¸ç­‰ï¼›å…¶ä½™åŒ ===; <a href="https://www.ecma-international.org/ecma-262/6.0/#sec-samevaluezero">ğŸ”—</a></span></li>
</ol>
</blockquote>
<p>â€ƒ</p>
<blockquote>
<p><strong>å‚è€ƒæ–‡çŒ®</strong></p>
<ol>
<li><a href="https://www.ecma-international.org/ecma-262/6.0/#sec-set-objects">ECMAScript 2015 (6th Edition, ECMA-262)</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set">MDN æ ‡å‡†å†…ç½®å¯¹è±¡Set</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/set-map#Set">é˜®ä¸€å³° ECMAScript 6å…¥é—¨ Set å’Œ Map æ•°æ®ç»“æ„</a></li>
</ol>
</blockquote>

    </body>
    </html>